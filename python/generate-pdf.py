import os
import nbformat
from nbconvert import HTMLExporter

# Define the list of notebooks to convert to HTML
notebook_files = [os.path.join(os.getcwd(), "python", "population.ipynb"),
                  os.path.join(os.getcwd(), "python", "entreprises.ipynb")]

# Convert all notebooks to HTML
for notebook_file in notebook_files:
    # Read the contents of the notebook file
    with open(notebook_file, "r", encoding="utf-8") as f:
        nb_content = f.read()

    # Convert the notebook to HTML
    nb = nbformat.reads(nb_content, as_version=4)
    html_exporter = HTMLExporter()
    html_exporter.exclude_input = True  # Exclude input cells
    html_exporter.exclude_output_prompt = True  # Remove output prompts
    html_body, _ = html_exporter.from_notebook_node(nb)

    # Write the HTML to a file
    output_file = os.path.splitext(notebook_file)[0] + ".html"
    with open(output_file, "w", encoding="utf-8") as f:
        f.write(html_body)